@{
    Layout = null;
}


<style>

    #rodape {
        grid-area: rodape;
        display: flex;
        justify-content: center;
        /* main axes alinha com a linha */
        align-items: center;
        /* cross axes alinha com a coluna */
        font-size: 1.2rem;
        padding-right: 20px;
        background-color: lightyellow;
        text-align: center;
    }

    #principal {
        grid-area: principal;
        height: calc(100vh - 180px);
        background-color: transparent;
        padding: 20px;
        /* define que conteúdo não cole em momento algum em bordas ou afins */
        padding-bottom: 10px;
    }

    #conteudo {
        position: relative;
        height: 100%;
        overflow-y: scroll;
        /* rolagem apenas no conteudo e não na page inteira */
        background-color: white;
        padding: 20px;
        padding-bottom: 10px;
    }

    #body {
        height: 100vh;
        margin: 0px;
        display: grid;
        grid-template-rows: 120px 1fr 60px;
        /* define ordem cronológica da page e suas características */
        grid-template-columns: 1fr;
        grid-template-areas: "cabecalho "
            "principal "
            "rodape ";
    }

    .footer {
        background-color: #40396E;
        width: 100%;
        height: 20%;
        float: left;
        font-size: 18px;
        padding: 50px 10px 50px 10px;
    }

        .footer .left {
            width: 100%;
            float: left;
            border-bottom: 1px #222424 solid;
            border-right: 0;
            margin-bottom: 20px;
            padding-bottom: 20px;
        }

        .footer .title-footer {
            color: #ffffff;
            font-family: 'DM Sans', sans-serif;
            font-weight: initial;
            font-size: 26px;
            width: 100%;
            float: left;
            margin-bottom: 15px;
        }

            .footer .title-footer span {
                color: #A3A3CD;
                font-family: 'DM Sans', sans-serif;
                font-weight: bold;
            }

        /* Footer links */
        .footer .links {
            width: 100%;
            float: left;
            color: #ffffff;
            margin-bottom: 20px;
            padding: 0;
        }

            .footer .links a {
                display: block;
                line-height: 33px;
                text-decoration: none;
                color: #fff;
                font-family: 'DM Sans', sans-serif;
                font-size: 16px;
                transition: 0.3s;
            }

                .footer .links a:hover {
                    color: #A3A3CD;
                }

        .footer .Copyright {
            font-family: 'DM Sans', sans-serif;
            color: #8f9296;
            font-size: 14px;
            font-weight: normal;
            margin-bottom: 10px;
        }

        /*Rede Sociais*/
        .footer .footer-icons {
            width: 100%;
            float: left;
            margin-bottom: 20px;
        }

            .footer .footer-icons a {
                display: inline-block;
                width: 35px;
                height: 35px;
                cursor: pointer;
                background-color: #33383b;
                border-radius: 50px;
                font-family: 'DM Sans', sans-serif;
                font-size: 20px;
                color: #ffffff;
                text-align: center;
                line-height: 35px;
                margin-bottom: 5px;
                transition: 0.3s;
            }

                .footer .footer-icons a:hover {
                    background-color: #A3A3CD;
                }

        /*Right*/
        .footer .right {
            width: 100%;
            float: left;
        }

            .footer .right p {
                font-family: 'DM Sans', sans-serif;
                font-weight: initial;
                display: inline-block;
                vertical-align: top;
                font-size: 30px;
                color: #ffffff;
            }

        /*formulario*/
        .footer form {
            width: 0%;
            float: left;
        }

            .footer form input,
            .footer form textarea {
                display: block;
                border-radius: 3px;
                box-sizing: border-box;
                background-color: #1f2022;
                box-shadow: 0 1px 0 0 rgba(255, 255, 255, 0.1);
                border: none;
                resize: none;
                outline: none;
                font: inherit;
                font-size: 14px;
                font-family: 'DM Sans', sans-serif;
                font-weight: normal;
                color: #d1d2d2;
                width: 100%;
                padding: 18px;
            }

        .footer ::-webkit-input-placeholder {
            color: #5c666b;
        }

        .footer ::-moz-placeholder {
            color: #5c666b;
            opacity: 1;
        }

        .footer :-ms-input-placeholder {
            color: #5c666b;
        }

        .footer form input {
            width: 100%;
            height: 55px;
            float: left;
            margin-bottom: 15px;
        }

        .footer form textarea {
            height: 100px;
            margin-bottom: 20px;
        }

        .footer form .btn {
            border-radius: 3px;
            background-color: #1f2022;
            color: #ffffff;
            border: 0;
            padding: 15px 50px;
            font-family: 'DM Sans', sans-serif;
            font-weight: bold;
            float: left;
            cursor: pointer;
            transition: 0.3s;
        }

            .footer form .btn:hover {
                background-color: #A3A3CD;
            }

</style>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link rel="icon" type="image/x-icon" href="~/iconHarry.png" sizes="32x32" />
    <title>@ViewData["Title"] - CinEXame</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Source+Serif+Pro:400,600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="~/fonts/icomoon/style.css">
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="~/css/fonts-icones.css" />
</head>
<body>
    <header class="header">

        <div class="content" style="background-color: #40396E">
            <div class="col-12 col-xl-6" style="text-align:center; background-color: #40396E">
                <img src="~/imagens/rick.svg" title="CinEXame" />
                <h1 style="color:white">CinEXame</h1>
            </div>
            <a class="nav-link btn btn-dark" href="../Login/LoginFuncionario" style="margin-left: 5px">Logoff</a>

        </div><!--content-->

    </header>
    <br />
    <div class="text-center">
        <h1 class="display-3">Cadastro: </h1>
    </div>
    <br />
    <ul class="nav nav-pills justify-content-center">
        <li class="nav-item">
            <a class="nav-link btn btn-info" style="margin-right:5px; color:white" href="../Cadastro/CadastroSexo">Sexo</a>
        </li>
        <li class="nav-item">
            <a class="nav-link btn btn-info" href="../Cadastro/CadastroFuncionario">Funcionário</a>
        </li>
        <li class="nav-item">
            <a class="nav-link btn btn-info" href="../Cadastro/CadastroSala" style="margin-left: 5px">Sala</a>
        </li>
        <li class="nav-item">
            <a class="nav-link btn btn-info" href="../Cadastro/CadastroPoltrona" style="margin-left: 5px">Poltrona</a>
        </li>
        <li class="nav-item">
            <a class="nav-link btn btn-info" href="../Cadastro/CadastroSessao" style="margin-left: 5px">Sessão</a>
        </li>
        <li class="nav-item">
            <a class="nav-link btn btn-info" href="../Cadastro/CadastroPessoa" style="margin-left: 5px">Pessoa</a>
        </li>
        <li class="nav-item">
            <a class="nav-link btn btn-info" href="../Cadastro/CadastroEmpresa" style="margin-left: 5px">Empresa</a>
        </li>
    </ul>

    <main id="principal">
        <div id="conteudo">
            <div class="container">
                <div class="text-center">
                    <h2 class="display-3">Filme</h2>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row">
                    <div class="col-12" style="text-align:left">
                        <button id="btnInserir" class="btn btn-info">NOVO</button>
                    </div>
                </div>
                <br />
                <div class="row mt-5">
                    <div class="col-12">
                        <div id="divLista">
                            <table id="tbFilme" class="table table-bordered">
                                <thead class="">
                                    <tr>
                                        <th class="border border-dark text-center" style="background-color: #A3A3CD; color:white">
                                            NOME
                                        </th>
                                        <th class="border border-dark text-center" style="background-color: #A3A3CD; color:white">
                                            DESCRIÇÃO
                                        </th>
                                        <th class="border border-dark text-center" style="background-color: #A3A3CD; color:white">
                                            EMPRESA
                                        </th>
                                        <th class="border border-dark text-center" style="background-color: #A3A3CD; color:white">
                                            DURAÇÃO
                                        </th>
                                        <th class="border border-dark text-center" style="background-color: #A3A3CD; color:white">
                                            VALOR INGRESSO
                                        </th>
                                        <th class="border border-dark text-center" style="background-color: #A3A3CD; color:white">
                                            LANÇAMENTO
                                        </th>
                                        <th class="border border-dark text-center" style="background-color: #A3A3CD; color:white">
                                            IMAGEM
                                        </th>
                                        <th class="border border-dark text-center" style="background-color: #A3A3CD; color:white">
                                            DESTAQUE
                                        </th>
                                        <th class="border border-dark text-center" style="background-color: #A3A3CD; color:white">
                                            SALA
                                        </th>
                                        <th class="border border-dark text-center" style="background-color: #A3A3CD; color:white">
                                            AÇÕES
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                        <div id="divCadastro" class="esconder">
                            <form id="formulario" method="dialog" class="needs-validation" novalidate>
                                <div class="form-row">
                                    <div class="col col-lg-12 col-sm-12 col-md-12">
                                        <input id="txtCodigo" type="hidden" />
                                    </div>
                                    <div class="col-12 col-xl-5 col-sm-12 col-md-12">
                                        <label for="txtNome">Nome:</label>
                                        <input id="txtNome" type="text" class="form-control" placeholder="Nome" required />
                                    </div>
                                    <div class="col-12 col-lg-3 col-sm-3 col-md-3">
                                        <label for="txtDescricao">Descrição:</label>
                                        <input id="txtDescricao" type="text" class="form-control" placeholder="Descrição"
                                               required />
                                    </div>
                                    <div class="col-12 col-lg-3 col-sm-3 col-md-3">
                                        <label for="txtDuracao">Duração:</label>
                                        <input id="txtDuracao" type="number" class="form-control" placeholder="Duração" required />
                                    </div>
                                    <br />
                                    <br />
                                    <br />
                                    <div class="col-12 mb-3">
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" id="cbDestaque">
                                            <label class="form-check-label" for="inlineCheckbox1">Destaque</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" id="cbLancamento">
                                            <label class="form-check-label" for="inlineCheckbox2">Lançamento</label>
                                        </div>
                                    </div>
                                    <div class="col-12 col-xl-5 col-sm-12 col-md-12">
                                        <label for="txtIngresso">Valor Ingresso:</label>
                                        <input id="txtIngresso" type="text" class="form-control" placeholder="Valor do Ingresso" required />
                                    </div>
                                    <br />
                                    <div class="col-12 mb-3">
                                        <label for="cdEmpresa">Empresa:</label>
                                        <select id="cdEmpresa" class="form-control" required>
                                            <option>Selecione</option>
                                        </select>
                                    </div>
                                    <div class="col-12 mb-3">
                                        <label for="cdSala">Sala:</label>
                                        <select id="cdSala" class="form-control" required>
                                            <option>Selecione</option>
                                        </select>
                                    </div>

                                    <div class="col-12 col-lg-9 col-sm-9 col-md-9 ">
                                        <label for="imagem">Imagem:</label>
                                        <div class="col-md-12 mb-3">
                                            <input id="imagem" type="file" class="form-control" required />
                                            <br />
                                            <button id="btnSalvarImagem" class="btn btn-primary">Salvar Imagem</button>
                                        </div>
                                        <div class="col-md-12 mb-3">
                                            <img src="" id="imagemFilme" width="350" />
                                        </div>
                                    </div>


                                </div>
                                <br />
                                <div class="col-7 text-center">
                                    <button id="btnSalvar" class="btn btn-primary" style="color: white" type="submit">
                                        SALVAR
                                    </button>
                                </div>

                            </form>
                        </div>
                        <br /><br /><br />
                    </div>
                </div>
            </div>
        </div>
    </main>
    <footer class="footer">
        <div class="center">
            <h4 class="title-footer">Projeto <span>CinEXame</span></h4>
            <p class="Copyright">Copyright &copy; 2022 - CinEXame.</p>
        </div><!--Left-->
    </footer>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="@(Url.Content("https://cdn.jsdelivr.net/npm/cleave.js@1.6.0/dist/cleave.min.js"))" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.11/jquery.mask.min.js"></script>
</body>

<style>
    .esconder {
        display: none;
    }
</style>
<script>
    var url = 'https://localhost:44383/api/';
    var urlImagem = 'https://localhost:44383/api/Filme/obterimagem?arquivo=';
    var imagemSelecionada = '';

    function carregarImagem() {
        $('#imagemFilme').val('');
        $('#imagemFilme').attr('src', urlImagem + imagemSelecionada);
    }

    function salvarImagem() {
        var url = 'https://localhost:44383/api/Filme/upload';
        var fd = new FormData();

        fd.append('files', $('#imagem')[0].files[0]);

        $.ajax({
            type: 'POST',
            url: url,
            processData: false,
            contentType: false,
            data: fd,
            success: function(result) {
                imagemSelecionada = result;

                carregarImagem();
            },
            failure: function(response) {
                alert("Erro ao carregar os dados: " + response);;
            }
        });
    }

    function carregarEmpresa() {
        $.ajax({
            type: "GET",
            url: url + 'Empresa/listar',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function(jsonResult) {

                if (jsonResult.status) {

                    var lista = jsonResult.resultado;

                    $.each(lista, function(index, obj) {
                        if (obj.ativo) {
                            $('#cdEmpresa')
                                .append($('<option>', {
                                    text: obj.nome,
                                    value: obj.id
                                }));
                        }

                    });

                }

            },
            failure: function(response) {
                alert("Erro ao carregar os dados: " + response);
            }
        });
    }

    function carregarSala() {
        $.ajax({
            type: "GET",
            url: url + 'Sala/listar',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function(jsonResult) {

                if (jsonResult.status) {

                    var lista = jsonResult.resultado;

                    $.each(lista, function(index, obj) {
                        if (obj.ativo) {
                            $('#cdSala')
                                .append($('<option>', {
                                    text: obj.nome,
                                    value: obj.id
                                }));
                        }

                    });

                }

            },
            failure: function(response) {
                alert("Erro ao carregar os dados: " + response);
            }
        });
    }

    function adicionarFilme() {
        $('#divCadastro').removeClass('esconder');
        $('#txtNome').val('');
        $('#txtCodigo').val('0');
        $('#cdEmpresa').val('Selecione');
        $('#txtDescricao').val('');
        $('#imagem').val('');
        $('#txtDuracao').val('');
        $('#imagemFilme').val(null);
        $('#cdSala').val('Selecione');
        $('#txtIngresso').val('');
        const checkDestaque = document.getElementById("cbDestaque");
        checkDestaque.checked = false;
        const checkLancamento = document.getElementById("cbLancamento");
        checkLancamento.checked = false;
    }

    function excluirFilme(id) {


        $.ajax({
            type: "DELETE",
            url: url + 'Filme/deletar?id=' + id,
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function(jsonResult) {

                if (jsonResult.status) {

                    listarFilme();
                    $('#divCadastro').addClass('esconder');

                }
                else {

                    alert(jsonResult.Mensagem);

                }
            },
            failure: function(response) {
                alert("Erro ao carregar os dados: " + response);
            }
        });

    }

    function inserir() {

        //console.log('salvar');
        var resultadoLancamento = false;

        var resultadoDestaque = false;


        const checkLancamento = document.getElementById("cbLancamento");
        if (checkLancamento.checked == true) {
            resultadoLancamento = true;
        }


        const checkDestaque = document.getElementById("cbDestaque");
        if (checkDestaque.checked == true) {
            resultadoDestaque = true;
        }

        var id = $('#txtCodigo').val();
        var nome = $('#txtNome').val();
        var empresa = $('#cdEmpresa').val();
        var descricao = $('#txtDescricao').val();
        var duracao = $('#txtDuracao').val();
        var sala = $('#cdSala').val();
        var destaque = resultadoDestaque;
        var lancamento = resultadoLancamento;
        var valorIngresso = $('#txtIngresso').val();
        if (id == '0' && nome != "" && empresa != "" && descricao != "" && duracao != "" && imagemSelecionada != "" && sala != "" && duracao >= 60 && valorIngresso >= 10) {

            var obj = {
                Id: parseInt(id),
                Nome: nome,
                IdEmpresa: parseInt(empresa),
                Descricao: descricao,
                Imagem: imagemSelecionada,
                DuracaoMinutos: parseInt(duracao),
                IdSala: parseInt(sala),
                Destaque: destaque,
                Lancamento: lancamento,
                ValorIngresso: parseFloat(valorIngresso)
            };
            console.log(obj);
        } else if (nome == '') {
            alert("Preencha campo nome!!!");
        } else if (empresa == 'Selecione') {
            alert("Selecione uma empresa!!");
        } else if (descricao == '') {
            alert("Informe uma descrição!!");
        } else if (duracao == '' || duracao < 60) {
            alert("Informe uma duração que tenha no mínimo 60min!!");
        } else if (sala == 'Selecione') {
            alert("Selecione uma sala!!")
        } else if (imagemSelecionada == '') {
            alert("Favor salvar Imagem do Filme antes de Salvar!!");
        } else if (valorIngresso < 10) {
            alert("Valor de ingresso deve ser no mínimo R$10,00");
        } else {
            alert("Preencha campos de forma válida!!");
        };

        $.ajax({
            type: "PUT",
            url: url + 'Filme/salvar',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            data: JSON.stringify(obj),
            success: function(jsonResult) {

                console.log('metodo post: ', jsonResult);

                if (jsonResult.status) {
                    adicionarFilme();
                    listarFilme();

                }

            },
            failure: function(response) {
                alert("Erro ao carregar os dados: " + response);
            }
        });

    }

    function alterar() {
        var resultadoLancamento = false;

        var resultadoDestaque = false;


        const checkLancamento = document.getElementById("cbLancamento");
        if (checkLancamento.checked == true) {
            resultadoLancamento = true;
        }


        const checkDestaque = document.getElementById("cbDestaque");
        if (checkDestaque.checked == true) {
            resultadoDestaque = true;
        }

        var id = $('#txtCodigo').val();
        var nome = $('#txtNome').val();
        var empresa = $('#cdEmpresa').val();
        var descricao = $('#txtDescricao').val();
        var duracao = $('#txtDuracao').val();
        var sala = $('#cdSala').val();
        var destaque = resultadoDestaque;
        var lancamento = resultadoLancamento;
        var valorIngresso = $('#txtIngresso').val();
        if (id != '0' && nome != "" && empresa != "" && descricao != "" && duracao != "" && imagemSelecionada != "" && sala != "" && duracao >= 60 && valorIngresso >= 10) {

            var obj = {
                Id: parseInt(id),
                Nome: nome,
                IdEmpresa: parseInt(empresa),
                Descricao: descricao,
                Imagem: imagemSelecionada,
                DuracaoMinutos: parseInt(duracao),
                IdSala: parseInt(sala),
                Destaque: destaque,
                Lancamento: lancamento,
                ValorIngresso: parseFloat(valorIngresso)
            };
        } else if (nome == '') {
            alert("Preencha campo nome!!!");
        } else if (empresa == 'Selecione') {
            alert("Selecione uma empresa!!");
        } else if (descricao == '') {
            alert("Informe uma descrição!!");
        } else if (duracao == '' || duracao < 60) {
            alert("Informe uma duração que tenha no mínimo 60min!!");
        } else if (sala == 'Selecione') {
            alert("Selecione uma sala!!")
        } else if (imagemSelecionada == '') {
            alert("Favor salvar Imagem do Filme antes de Salvar!!");
        } else if (valorIngresso < 10) {
            alert("Valor de ingresso deve ser no mínimo R$10,00");
        } else {
            alert("Preencha campos de forma válida!!");
        };

        $.ajax({
            type: "POST",
            url: url + 'Filme/alterar',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            data: JSON.stringify(obj),
            success: function(jsonResult) {

                console.log('metodo post: ', jsonResult);

                if (jsonResult.status) {
                    $('#divCadastro').addClass('esconder');
                    listarFilme();

                }

            },
            failure: function(response) {
                alert("Erro ao carregar os dados: " + response);
            }
        });

    }

    function editarFilme(id) {

        $.ajax({
            type: "GET",
            url: url + 'Filme/recuperar?id=' + id,
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function(jsonResult) {

                if (jsonResult.status) {

                    console.log(jsonResult);

                    $('#divCadastro').removeClass('esconder');

                    var obj = jsonResult.resultado;

                    $('#txtCodigo').val(obj.id);
                    $('#txtNome').val(obj.nome);
                    $('#txtDescricao').val(obj.descricao);
                    $('#txtDuracao').val(obj.duracaoMinutos);
                    if (obj.cartaz == true) {
                        const check = document.getElementById("cbDestaque");
                        check.checked = true;
                    }
                    else {
                        const check = document.getElementById("cbDestaque");
                        check.checked = false;
                    }

                    if (obj.lancamento == true) {
                        const check = document.getElementById("cbLancamento");
                        check.checked = true;
                    }
                    else {
                        const check = document.getElementById("cbLancamento");
                        check.checked = false;
                    }
                    $('#txtIngresso').val(obj.valorIngresso);
                    $('#cdEmpresa').val(obj.idEmpresa);
                    $('#cdSala').val(obj.idSala);
                    imagemSelecionada = obj.imagem;
                    carregarImagem();




                }

            },
            failure: function(response) {
                alert("Erro ao carregar os dados: " + response);
            }
        });

    }

    function listarFilme() {
        $.ajax({
            type: "GET",
            url: url + "Filme/listar",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function(jsonResult) {

                if (jsonResult.status) {
                    var lista = jsonResult.resultado;
                    console.log(lista);
                    var botaoEditar = "";
                    var botaoExcluir = "";
                    $('#tbFilme')
                        .find('tbody')
                        .empty();

                    $.each(lista, function(index, value) { //percorre a lista para jogar na table
                        var linkimagem = "";
                        linkimagem = linkimagem.concat(urlImagem, value.imagem);
                        botaoEditar = '<button class="btn btn-warning" onclick="editarFilme(' + value.id + ')">Editar</button>';
                        botaoExcluir = '<button class="btn btn-danger" onclick="excluirFilme(' + value.id + ')">Excluir</button>';
                        if (value.destaque == true) {
                            value.destaque = "Sim"
                        } else {
                            value.destaque = "Não"
                        }
                        if (value.lancamento == true) {
                            value.lancamento = "Sim"
                        } else {
                            value.lancamento = "Não"
                        }
                        $('#tbFilme')
                            .find('tbody')
                            .append('<tr>')
                            .append($('<td class="border border-info text-center">').append(value.nome))
                            .append($('<td class="border border-info text-center">').append(value.descricao))
                            .append($('<td class="border border-info text-center">').append(value.nomeEmpresa))
                            .append($('<td class="border border-info text-center">').append(value.duracaoMinutos))
                            .append($('<td class="border border-info text-center">').append(value.valorIngresso))
                            .append($('<td class="border border-info text-center">').append(value.lancamento))
                            .append($('<td class="border border-info text-center">').append($('<img src="" width="200" height="200">').attr('src', linkimagem)))
                            .append($('<td class="border border-info text-center">').append(value.destaque))
                            .append($('<td class="border border-info text-center">').append(value.nomeSala))
                            .append($('<td class="border border-info text-center">').append(botaoEditar + " " + botaoExcluir));

                    });

                }

                //console.log(jsonResult);
            },
            failure: function(response) {
                alert("Erro ao carregar os dados: " + response);
            }
        });
    }

    function salvar() {

        var id = $('#txtCodigo').val();

        if (id == '0') {

            inserir();

        }
        else {

            alterar();

        }

    }


    $(function() {
        listarFilme();

        carregarEmpresa();

        carregarSala();

        $('#btnInserir').click(function() { adicionarFilme(); });

        $('#btnSalvar').click(function() { salvar(); });

        $('#btnSalvarImagem').click(function() { salvarImagem(); });

    });

</script>